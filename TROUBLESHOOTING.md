# Troubleshooting Guide

This guide addresses common issues you might encounter when working with the SOLID Local File Manager application.

## Known Issues

### 412 Precondition Failed Error When Updating Files

**Issue**: When trying to update files in the welldata container, particularly the initial-plan.ttl file, you may encounter a 412 Precondition Failed error.

**Cause**: This is a known bug related to how the Solid server handles ETags and access control for certain files, especially in the welldata container.

**Workaround**:
1. You can still view and create files in the welldata container.
2. If you need to modify the content, consider creating a new file with the updated content and then deleting the old one.
3. For developers: The issue appears to be related to the RDF structure of the file and how it's saved. The application attempts several fallback methods, but some files remain problematic.

### SOLID Server Using Old Client Credentials

**Issue**: The SOLID server sometimes reverts to using old client credentials, causing "accountID mismatch" errors during login attempts.

**Cause**: This appears to be related to a timeout or cache issue with the SOLID server's client registration system.

**Solutions**:
1. **Manual URL Fix**: Take the client_id from the `.data/client-credentials/app2-credentials.json` file and manually append it to the failing OIDC URL behind the login button.
   - Example: If the URL is `http://localhost:3000/.oidc/auth?...&client_id=OLD_ID...`, replace `OLD_ID` with the current client_id from the credentials file.

2. **Re-register Clients**: Run the register-fixed-clients.sh script again to refresh all client registrations:
   ```bash
   bash scripts/register-fixed-clients.sh
   ```

3. **Clear Browser Storage**: Use the "Clear Auth Data" button in the application's authentication panel to clear any cached credentials.

## Community Solid Server Issues

### Server Won't Start

**Issue**: The Community Solid Server fails to start with configuration errors.

**Solution**:
1. Check if you're using the default configuration:
   ```bash
   npx @solid/community-server
   ```
2. If using a custom config.json, ensure it's properly formatted and all referenced URLs are accessible.
3. Check for Node.js version compatibility. The server works best with Node.js versions ^12.19.0, ^14.15.0, or ^16.13.0.

### Data Persistence

**Issue**: Data doesn't persist after restarting the server.

**Solution**:
1. By default, the Community Solid Server stores data in memory. For persistent storage, use the file storage configuration:
   ```bash
   npx @solid/community-server -c @css:config/file.json
   ```
2. Alternatively, configure a custom storage location in your config.json.

## Authentication Issues

### CORS Errors

**Issue**: Browser console shows CORS errors when trying to authenticate or access resources.

**Solution**:
1. For development, always use the local WebID generated by your Community Solid Server.
2. Ensure both your application and the Solid server are running on localhost.
3. If you must use a remote WebID, ensure the remote server has proper CORS headers configured.

### Authentication Fails

**Issue**: Unable to log in or authentication process fails.

**Solution**:
1. Check the Community Solid Server logs for authentication-related errors.
2. Ensure you're using the correct identity provider URL (http://localhost:3000 for local development).
3. Verify that your WebID document is accessible and properly formatted.
4. Try creating a new test account and Pod to rule out account-specific issues.

### Session Expires Too Quickly

**Issue**: You're frequently asked to log in again.

**Solution**:
1. The default session duration is relatively short for security reasons.
2. For development, you can extend the session duration in the server configuration.
3. Ensure your application is properly refreshing tokens when needed.

## WebID and Pod Issues

### WebID Not Found

**Issue**: Application can't find or access your WebID.

**Solution**:
1. Verify that your WebID URL is correct. For local development, it should be:
   ```
   http://localhost:3000/[pod-name]/profile/card#me
   ```
2. Check that the WebID document is accessible by navigating to it in your browser.
3. Ensure you're authenticated before trying to access protected resources.

### Can't Create or Access Pod

**Issue**: Unable to create a new Pod or access an existing one.

**Solution**:
1. Verify that you're properly authenticated.
2. Check the server logs for permission-related errors.
3. For a new Pod, ensure you're using a unique name that doesn't already exist.
4. For accessing an existing Pod, verify the URL is correct and you have the necessary permissions.

## Application Issues

### Application Can't Connect to Server

**Issue**: The web application can't connect to the Community Solid Server.

**Solution**:
1. Ensure the Solid server is running at http://localhost:3000.
2. Check for any network issues or firewall restrictions.
3. Verify that the server URL is correctly configured in your application.

### Resource Operations Fail

**Issue**: Unable to create, read, update, or delete resources in the Pod.

**Solution**:
1. Check that you're properly authenticated and have the necessary permissions.
2. Verify the resource URLs are correctly formatted.
3. For write operations, ensure you're using the correct content types and formats.
4. Check the server logs for detailed error messages.

## Node.js Version Issues

**Issue**: Warnings about unsupported Node.js version.

**Solution**:
1. The Community Solid Server works best with Node.js versions ^12.19.0, ^14.15.0, or ^16.13.0.
2. Consider using a tool like nvm (Node Version Manager) to switch between Node.js versions:
   ```bash
   # Install nvm
   curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
   
   # Install and use a compatible Node.js version
   nvm install 16.13.0
   nvm use 16.13.0
   ```
3. For newer Node.js versions, some features might work but with warnings.

## Getting Help

If you continue to experience issues:

1. Check the [Community Solid Server documentation](https://github.com/solid/community-server/tree/main/documentation).
2. Search for similar issues in the [GitHub repository](https://github.com/solid/community-server/issues).
3. Join the [Solid community forum](https://forum.solidproject.org/) for support.
4. Reach out to the project maintainer for project-specific issues. 